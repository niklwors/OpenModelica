<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2629px" preserveAspectRatio="none" style="width:4495px;height:2629px;" version="1.1" viewBox="0 0 4495 2629" width="4495px" zoomAndPan="magnify"><defs><filter height="300%" id="facyb4us9s9sd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFF8DC" height="2598.7129" style="stroke: #FFF8DC; stroke-width: 1.0;" width="723" x="15" y="13.9053"/><ellipse cx="332" cy="52.4072" fill="#000000" filter="url(#facyb4us9s9sd)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="253" y="132.8584"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="263" y="155.3154">read program arguments</text><path d="M451,177.9521 L451,228.0068 L431,232.0068 L451,236.0068 L451,286.0615 A0,0 0 0 0 451,286.0615 L716,286.0615 A0,0 0 0 0 716,286.0615 L716,187.9521 L706,177.9521 L451,177.9521 A0,0 0 0 0 451,177.9521 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M706,177.9521 L706,187.9521 L716,187.9521 L706,177.9521 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="462.5" cy="191.8037" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="470" y="196.4473">which ports should be used</text><ellipse cx="462.5" cy="208.1553" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="470" y="212.7988">id's for client and simulation</text><ellipse cx="462.5" cy="224.5068" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="470" y="229.1504">OpenModelica compiler installation path</text><ellipse cx="462.5" cy="240.8584" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="470" y="245.502">working directory</text><ellipse cx="462.5" cy="257.21" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="470" y="261.8535">C++ compiler</text><ellipse cx="462.5" cy="273.5615" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="470" y="278.2051">print debug information</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="80.375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="233" y="191.8193"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="243" y="214.2764">instantiate omc and</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="246" y="229.3701">initialize omc with</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="175" x="246" y="244.4639">zeroMQ configuration parameter</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="246" y="259.5576">via omc C-API function</text><rect fill="#000000" filter="url(#facyb4us9s9sd)" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="707" x="21" y="306.0615"/><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="65.2813" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="33" y="1304.6182"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="43" y="1327.0752">Waiting for thread zeroMQ</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="43" y="1342.1689">until application</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="72" x="43" y="1357.2627">is terminated</text><rect fill="#000000" filter="url(#facyb4us9s9sd)" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="707" x="21" y="2394.0557"/><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="65.2813" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="269" y="2420.0557"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="279" y="2442.5127">Check if exceptions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="282" y="2457.6064">have occurred in</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103" x="282" y="2472.7002">simulation threads</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="65.2813" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="270.5" y="2505.3369"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="280.5" y="2527.7939">Printing errors</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="280.5" y="2542.8877">that have occurred</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="280.5" y="2557.9814">in output</text><ellipse cx="332" cy="2601.6182" fill="#FFFFFF" filter="url(#facyb4us9s9sd)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="332" cy="2601.6182" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="15" x2="15" y1="13.9053" y2="2612.6182"/><rect fill="#6495ED" height="2598.7129" style="stroke: #6495ED; stroke-width: 1.0;" width="2082.75" x="738" y="13.9053"/><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="1909.75" y="332.0615"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="1919.75" y="354.5186">setup zeroMQ connection</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="1896.75" y="387.1553"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="164" x="1906.75" y="409.6123">load Modelica standard library</text><rect fill="#FFC0CB" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="1901.25" y="491.167"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="152" x="1911.25" y="513.624">forward error to main thread</text><ellipse cx="1988.75" cy="563.2139" fill="#FFFFFF" filter="url(#facyb4us9s9sd)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="1982.5628" x2="1994.9372" y1="557.0267" y2="569.4011"/><line style="stroke: #000000; stroke-width: 2.5;" x1="1994.9372" x2="1982.5628" y1="557.0267" y2="569.4011"/><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="1960.75,442.249,2016.75,442.249,2028.75,454.249,2016.75,466.249,1960.75,466.249,1948.75,454.249,1960.75,442.249" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="1992.75" y="477.668">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="1960.75" y="458.75">not loaded?</text><path d="M2086.25,649.2139 L2086.25,674.7412 L2066.25,678.7412 L2086.25,682.7412 L2086.25,708.2686 A0,0 0 0 0 2086.25,708.2686 L2329.25,708.2686 A0,0 0 0 0 2329.25,708.2686 L2329.25,659.2139 L2319.25,649.2139 L2086.25,649.2139 A0,0 0 0 0 2086.25,649.2139 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2319.25,649.2139 L2319.25,659.2139 L2329.25,659.2139 L2319.25,649.2139 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="2092.25" y="667.709">via zeroMQ</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="2092.25" y="684.0605">command send from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="2092.25" y="700.4121">client application or simulation threads</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="1911.25,661.1943,2076.25,661.1943,2066.25,678.7412,2076.25,696.2881,1911.25,696.2881" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="129" x="1921.25" y="683.6514">wait for  user command</text><path d="M2120.75,718.2686 L2120.75,751.9717 L2100.75,755.9717 L2120.75,759.9717 L2120.75,793.6748 A0,0 0 0 0 2120.75,793.6748 L2609.75,793.6748 A0,0 0 0 0 2609.75,793.6748 L2609.75,728.2686 L2599.75,718.2686 L2120.75,718.2686 A0,0 0 0 0 2120.75,718.2686 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2599.75,718.2686 L2599.75,728.2686 L2609.75,728.2686 L2599.75,718.2686 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="2132.25" cy="732.1201" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="2139.75" y="736.7637">simulation ID</text><ellipse cx="2132.25" cy="748.4717" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="455" x="2139.75" y="753.1152">command type (StartSimulation,StopSimulation,SimulationThreadWatingForID)</text><ellipse cx="2132.25" cy="764.8232" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="2139.75" y="769.4668">command argumentes</text><ellipse cx="2132.25" cy="781.1748" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="2139.75" y="785.8184">command ID (jobID)</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="224" x="1876.75" y="738.4248"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="204" x="1886.75" y="760.8818">read json user command information</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="835.5,827.8242,1085.5,827.8242,1097.5,839.8242,1085.5,851.8242,835.5,851.8242,823.5,839.8242,835.5,827.8242" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="964.5" y="863.2432">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="835.5" y="844.3252">command type ==</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="923.5" y="844.3252">SimulationThreadWatingForID</text><path d="M1172,889.1143 L1172,898.29 L1152,902.29 L1172,906.29 L1172,915.4658 A0,0 0 0 0 1172,915.4658 L1376,915.4658 A0,0 0 0 0 1376,915.4658 L1376,899.1143 L1366,889.1143 L1172,889.1143 A0,0 0 0 0 1172,889.1143 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1366,889.1143 L1366,899.1143 L1376,899.1143 L1366,889.1143 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="1178" y="907.6094">via zeroMQ to simulation thread</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="769,884.7432,1152,884.7432,1162,902.29,1152,919.8369,769,919.8369" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="167" x="782" y="907.2002">send command id (jobID)  and</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="952" y="907.2002">StartSimulationThread</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="1083" y="907.2002">command</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="1421.5,827.8242,1592.5,827.8242,1604.5,839.8242,1592.5,851.8242,1421.5,851.8242,1409.5,839.8242,1421.5,827.8242" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="1511" y="863.2432">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="1421.5" y="844.3252">command type ==</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="1509.5" y="844.3252">StopSimulation</text><path d="M1648,889.1143 L1648,898.29 L1628,902.29 L1648,906.29 L1648,915.4658 A0,0 0 0 0 1648,915.4658 L1843,915.4658 A0,0 0 0 0 1843,915.4658 L1843,899.1143 L1833,889.1143 L1648,889.1143 A0,0 0 0 0 1648,889.1143 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1833,889.1143 L1833,899.1143 L1843,899.1143 L1833,889.1143 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="1654" y="907.6094">via zeroMQ to progress thread</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="1386,884.7432,1628,884.7432,1638,902.29,1628,919.8369,1386,919.8369" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="28" x="1399" y="907.2002">send</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="1430" y="907.2002">StopSimulationThread</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="1559" y="907.2002">command</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="2364.25,827.8242,2539.25,827.8242,2551.25,839.8242,2539.25,851.8242,2364.25,851.8242,2352.25,839.8242,2364.25,827.8242" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="2455.75" y="863.2432">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="2364.25" y="844.3252">command type ==</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="2455.25" y="844.3252">StartSimulation</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="50.1875" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="239" x="2332.25" y="884.7432"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="219" x="2342.25" y="907.2002">set command id (jobID) in omc instance</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="2345.25" y="922.2939">via omc C-API function</text><rect fill="#000000" filter="url(#facyb4us9s9sd)" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="768.75" x="1853" y="954.9307"/><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="1865" y="1623.0127"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="1875" y="1645.4697">continue</text><rect fill="#000000" filter="url(#facyb4us9s9sd)" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="768.75" x="1853" y="2326.0557"/><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="65.8555" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="2631.75" y="1533.6201"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="2641.75" y="1556.0771">forward exception</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="135" x="2641.75" y="1571.1709">commandNotSupported</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="2779.75" y="1571.1709"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="2641.75" y="1586.8389">to omc-zeroMQ.</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="42" x="2726.75" y="1585.8721">main()</text><ellipse cx="2710.75" cy="1644.4756" fill="#FFFFFF" filter="url(#facyb4us9s9sd)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="2704.5628" x2="2716.9372" y1="1638.2884" y2="1650.6628"/><line style="stroke: #000000; stroke-width: 2.5;" x1="2716.9372" x2="2704.5628" y1="1638.2884" y2="1650.6628"/><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="1928.25,615.2139,2049.25,615.2139,2061.25,627.2139,2049.25,639.2139,1928.25,639.2139,1916.25,627.2139,1928.25,615.2139" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="1928.25" y="631.7148">omc-zeroMQ not closed?</text><line style="stroke: #000000; stroke-width: 2.0;" x1="738" x2="738" y1="13.9053" y2="2612.6182"/><rect fill="#5F9EA0" height="2598.7129" style="stroke: #5F9EA0; stroke-width: 1.0;" width="586.5" x="2820.75" y="13.9053"/><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="50.1875" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="292" x="2861.25" y="980.9307"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="269" x="2874.25" y="1003.3877">read command arguments for Modelica file paths</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="136" x="2871.25" y="1018.4814">of  needed Modelica files</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="50.1875" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="273" x="2870.75" y="1051.1182"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="250" x="2883.75" y="1073.5752">load all Modelica files with omc C-API function</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="2880.75" y="1088.6689">LoadFile</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="337" x="2838.75" y="1121.3057"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="314" x="2851.75" y="1143.7627">read command arguments for Modelica model parameter</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="50.1875" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="322" x="2846.25" y="1176.3994"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="302" x="2856.25" y="1198.8564">set all Modelica parameter with with omc C-API function</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="2856.25" y="1213.9502">SendCommand</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="50.1875" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="284" x="2865.25" y="1246.5869"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="264" x="2875.25" y="1269.0439">set the working directory with omc C-API function</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="2875.25" y="1284.1377">SetWorkingDirectory</text><path d="M3181.25,1331.7744 L3181.25,1365.4775 L3161.25,1369.4775 L3181.25,1373.4775 L3181.25,1407.1807 A0,0 0 0 0 3181.25,1407.1807 L3332.25,1407.1807 A0,0 0 0 0 3332.25,1407.1807 L3332.25,1341.7744 L3322.25,1331.7744 L3181.25,1331.7744 A0,0 0 0 0 3181.25,1331.7744 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3322.25,1331.7744 L3322.25,1341.7744 L3332.25,1341.7744 L3322.25,1331.7744 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="3192.75" cy="1345.626" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="3200.25" y="1350.2695">simulation stop time</text><ellipse cx="3192.75" cy="1361.9775" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="3200.25" y="1366.6211">number of intervalls</text><ellipse cx="3192.75" cy="1378.3291" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="3200.25" y="1382.9727">tolerance</text><ellipse cx="3192.75" cy="1394.6807" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="3200.25" y="1399.3242">solver name</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="308" x="2853.25" y="1351.9307"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="285" x="2866.25" y="1374.3877">read command arguments for simulation parameter</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="286" x="2864.25" y="1427.1807"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="266" x="2874.25" y="1449.6377">translate Modelica code to simulation executable</text><path d="M3093.25,1486.6455 L3093.25,1495.8213 L3073.25,1499.8213 L3093.25,1503.8213 L3093.25,1512.9971 A0,0 0 0 0 3093.25,1512.9971 L3385.25,1512.9971 A0,0 0 0 0 3385.25,1512.9971 L3385.25,1496.6455 L3375.25,1486.6455 L3093.25,1486.6455 A0,0 0 0 0 3093.25,1486.6455 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3375.25,1486.6455 L3375.25,1496.6455 L3385.25,1496.6455 L3375.25,1486.6455 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="271" x="3099.25" y="1505.1406">executes simulation with simulation arguments</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="2941.25" y="1482.2744"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="112" x="2951.25" y="1504.7314">SimController.Start()</text><rect fill="#000000" filter="url(#facyb4us9s9sd)" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="570.5" x="2826.75" y="1552.3682"/><rect fill="#000000" filter="url(#facyb4us9s9sd)" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="570.5" x="2826.75" y="2159.6807"/><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="80.375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="2910.75" y="2185.6807"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="2920.75" y="2208.1377">Check if exceptions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="2926.75" y="2223.2314">have occurred in</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="164" x="2926.75" y="2238.3252">simulation thread and forward</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="2926.75" y="2253.4189">it to omcZeromqTask.run()</text><ellipse cx="3007.25" cy="2296.0557" fill="#FFFFFF" filter="url(#facyb4us9s9sd)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="3001.0628" x2="3013.4372" y1="2289.8685" y2="2302.2428"/><line style="stroke: #000000; stroke-width: 2.5;" x1="3013.4372" x2="3001.0628" y1="2289.8685" y2="2302.2428"/><line style="stroke: #000000; stroke-width: 2.0;" x1="2820.75" x2="2820.75" y1="13.9053" y2="2612.6182"/><rect fill="#778899" height="2598.7129" style="stroke: #778899; stroke-width: 1.0;" width="511.5" x="3407.25" y="13.9053"/><path d="M3688.25,1584.0361 L3688.25,1609.5635 L3668.25,1613.5635 L3688.25,1617.5635 L3688.25,1643.0908 A0,0 0 0 0 3688.25,1643.0908 L3881.25,1643.0908 A0,0 0 0 0 3881.25,1643.0908 L3881.25,1594.0361 L3871.25,1584.0361 L3688.25,1584.0361 A0,0 0 0 0 3688.25,1584.0361 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3871.25,1584.0361 L3871.25,1594.0361 L3881.25,1594.0361 L3871.25,1584.0361 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="3694.25" y="1602.5313">via zeroMQ</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="3694.25" y="1618.8828">command to omcZeromqTask</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="3694.25" y="1635.2344">to receive command id (jobID)</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="3422.25,1595.7295,3668.25,1595.7295,3678.25,1613.5635,3668.25,1631.3975,3422.25,1631.3975" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="28" x="3432.25" y="1618.7607">send</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="189" x="3463.25" y="1617.7939">SimulationThreadWatingForID</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="3658.25" y="1618.7607"/><path d="M3653.75,1678.0908 L3653.75,1703.6182 L3633.75,1707.6182 L3653.75,1711.6182 L3653.75,1737.1455 A0,0 0 0 0 3653.75,1737.1455 L3913.75,1737.1455 A0,0 0 0 0 3913.75,1737.1455 L3913.75,1688.0908 L3903.75,1678.0908 L3653.75,1678.0908 A0,0 0 0 0 3653.75,1678.0908 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3903.75,1678.0908 L3903.75,1688.0908 L3913.75,1688.0908 L3903.75,1678.0908 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="3659.75" y="1696.5859">via zeroMQ</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="3659.75" y="1712.9375">command id is send by omcZeromqTask</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="3663.75" y="1729.2891"/><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="3456.75,1690.0713,3643.75,1690.0713,3633.75,1707.6182,3643.75,1725.165,3456.75,1725.165" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="151" x="3466.75" y="1712.5283">wait for command id (jobID)</text><path d="M3629.25,1755.6475 L3629.25,1772.999 L3609.25,1776.999 L3629.25,1780.999 L3629.25,1798.3506 A0,0 0 0 0 3629.25,1798.3506 L3826.25,1798.3506 A0,0 0 0 0 3826.25,1798.3506 L3826.25,1765.6475 L3816.25,1755.6475 L3629.25,1755.6475 A0,0 0 0 0 3629.25,1755.6475 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3816.25,1755.6475 L3816.25,1765.6475 L3826.25,1765.6475 L3816.25,1755.6475 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="3635.25" y="1774.1426">informs controller of simulation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="3635.25" y="1790.4941">and progress threads</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.668" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="3481.25" y="1759.165"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="3494.25" y="1782.1963"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="3494.25" y="1781.2295">setSimStarted()</text><path d="M3674.25,1816.5654 L3674.25,1833.917 L3654.25,1837.917 L3674.25,1841.917 L3674.25,1859.2686 A0,0 0 0 0 3674.25,1859.2686 L3880.25,1859.2686 A0,0 0 0 0 3880.25,1859.2686 L3880.25,1826.5654 L3870.25,1816.5654 L3674.25,1816.5654 A0,0 0 0 0 3674.25,1816.5654 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3870.25,1816.5654 L3870.25,1826.5654 L3880.25,1826.5654 L3870.25,1816.5654 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="3680.25" y="1835.0605">via zeroMQ to client application</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="3680.25" y="1851.4121">with used command id (jobID)</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="3436.25,1820.3701,3654.25,1820.3701,3664.25,1837.917,3654.25,1855.4639,3436.25,1855.4639" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="28" x="3449.25" y="1842.8271">send</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="3480.25" y="1842.8271">SimulationStarted</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="3585.25" y="1842.8271">command</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="3482.75" y="1894.2686"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="3492.75" y="1916.7256">initialize simulation</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="3495.75" y="1960.3623"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79" x="3505.75" y="1982.8193">run simulation</text><path d="M3676.75,2026.4561 L3676.75,2043.8076 L3656.75,2047.8076 L3676.75,2051.8076 L3676.75,2069.1592 A0,0 0 0 0 3676.75,2069.1592 L3882.75,2069.1592 A0,0 0 0 0 3882.75,2069.1592 L3882.75,2036.4561 L3872.75,2026.4561 L3676.75,2026.4561 A0,0 0 0 0 3676.75,2026.4561 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3872.75,2026.4561 L3872.75,2036.4561 L3882.75,2036.4561 L3872.75,2026.4561 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="3682.75" y="2044.9512">via zeroMQ to client application</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="3682.75" y="2061.3027">with used command id (jobID)</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="3433.75,2030.2607,3656.75,2030.2607,3666.75,2047.8076,3656.75,2065.3545,3433.75,2065.3545" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="28" x="3446.75" y="2052.7178">send</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="3477.75" y="2052.7178">SimulationStopped</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="3587.75" y="2052.7178">command</text><path d="M3629.25,2091.3096 L3629.25,2108.6611 L3609.25,2112.6611 L3629.25,2116.6611 L3629.25,2134.0127 A0,0 0 0 0 3629.25,2134.0127 L3826.25,2134.0127 A0,0 0 0 0 3826.25,2134.0127 L3826.25,2101.3096 L3816.25,2091.3096 L3629.25,2091.3096 A0,0 0 0 0 3629.25,2091.3096 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3816.25,2091.3096 L3816.25,2101.3096 L3826.25,2101.3096 L3816.25,2091.3096 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="3635.25" y="2109.8047">informs controller of simulation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="3635.25" y="2126.1563">and progress threads</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.668" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="3481.25" y="2094.8271"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="3494.25" y="2117.8584"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="3494.25" y="2116.8916">setSimStopped()</text><line style="stroke: #000000; stroke-width: 2.0;" x1="3407.25" x2="3407.25" y1="13.9053" y2="2612.6182"/><rect fill="#2F4F4F" height="2598.7129" style="stroke: #2F4F4F; stroke-width: 1.0;" width="557" x="3918.75" y="13.9053"/><path d="M4173.25,1578.3682 L4173.25,1595.7197 L4153.25,1599.7197 L4173.25,1603.7197 L4173.25,1621.0713 A0,0 0 0 0 4173.25,1621.0713 L4370.25,1621.0713 A0,0 0 0 0 4370.25,1621.0713 L4370.25,1588.3682 L4360.25,1578.3682 L4173.25,1578.3682 A0,0 0 0 0 4173.25,1578.3682 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M4360.25,1578.3682 L4360.25,1588.3682 L4370.25,1588.3682 L4360.25,1578.3682 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="4179.25" y="1596.8633">informs controller of simulation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="4179.25" y="1613.2148">and progress threads</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.668" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="4025.25" y="1581.8857"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="4038.25" y="1604.917"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="4038.25" y="1603.9502">setGuiStarted()</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="3998.25" y="1704.0713"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="159" x="4011.25" y="1726.5283">get latest integrator step time</text><path d="M4248.75,1757.667 L4248.75,1775.0186 L4228.75,1779.0186 L4248.75,1783.0186 L4248.75,1800.3701 A0,0 0 0 0 4248.75,1800.3701 L4444.75,1800.3701 A0,0 0 0 0 4444.75,1800.3701 L4444.75,1767.667 L4434.75,1757.667 L4248.75,1757.667 A0,0 0 0 0 4248.75,1757.667 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M4434.75,1757.667 L4434.75,1767.667 L4444.75,1767.667 L4434.75,1757.667 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="4254.75" y="1776.1621">via zeroMQ client application</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="4254.75" y="1792.5137">with used command id (jobID)</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="3949.75,1761.4717,4228.75,1761.4717,4238.75,1779.0186,4228.75,1796.5654,3949.75,1796.5654" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="28" x="3962.75" y="1783.9287">send</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="163" x="3993.75" y="1783.9287">SimulationProgressChanged</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="4159.75" y="1783.9287">command</text><path d="M4183.25,1818.585 L4183.25,1844.1123 L4163.25,1848.1123 L4183.25,1852.1123 L4183.25,1877.6396 A0,0 0 0 0 4183.25,1877.6396 L4322.25,1877.6396 A0,0 0 0 0 4322.25,1877.6396 L4322.25,1828.585 L4312.25,1818.585 L4183.25,1818.585 A0,0 0 0 0 4183.25,1818.585 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M4312.25,1818.585 L4312.25,1828.585 L4322.25,1828.585 L4312.25,1818.585 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="4189.25" y="1837.0801">via zeroMQ</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="4189.25" y="1853.4316">command send from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="4189.25" y="1869.7832">client application</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="4015.25,1830.5654,4173.25,1830.5654,4163.25,1848.1123,4173.25,1865.6592,4015.25,1865.6592" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="125" x="4025.25" y="1853.0225">ask for simulation stop</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="50.1875" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="4009.25" y="1956.6396"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="4019.25" y="1979.0967">inform thread controller to</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="4019.25" y="1994.1904">stop threads</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="4036.25,1912.6396,4142.25,1912.6396,4154.25,1924.6396,4142.25,1936.6396,4036.25,1936.6396,4024.25,1924.6396,4036.25,1912.6396" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="4036.25" y="1929.1406">simulation is stopped?</text><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="4089.25,2026.8271,4101.25,2038.8271,4089.25,2050.8271,4077.25,2038.8271,4089.25,2026.8271" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#facyb4us9s9sd)" points="4035.75,1656.0713,4142.75,1656.0713,4154.75,1668.0713,4142.75,1680.0713,4035.75,1680.0713,4023.75,1668.0713,4035.75,1656.0713" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="4035.75" y="1672.5723">not simulation stoped?</text><path d="M4173.25,2096.9775 L4173.25,2114.3291 L4153.25,2118.3291 L4173.25,2122.3291 L4173.25,2139.6807 A0,0 0 0 0 4173.25,2139.6807 L4370.25,2139.6807 A0,0 0 0 0 4370.25,2139.6807 L4370.25,2106.9775 L4360.25,2096.9775 L4173.25,2096.9775 A0,0 0 0 0 4173.25,2096.9775 " fill="#FBFB77" filter="url(#facyb4us9s9sd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M4360.25,2096.9775 L4360.25,2106.9775 L4370.25,2106.9775 L4360.25,2096.9775 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="4179.25" y="2115.4727">informs controller of simulation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="4179.25" y="2131.8242">and progress threads</text><rect fill="#FEFECE" filter="url(#facyb4us9s9sd)" height="35.668" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="4025.25" y="2100.4951"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="4038.25" y="2123.5264"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="4038.25" y="2122.5596">setGuiStopped()</text><line style="stroke: #000000; stroke-width: 2.0;" x1="3918.75" x2="3918.75" y1="13.9053" y2="2612.6182"/><line style="stroke: #000000; stroke-width: 2.0;" x1="4475.75" x2="4475.75" y1="13.9053" y2="2612.6182"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="332" x2="332" y1="62.4072" y2="132.8584"/><polygon fill="#A80036" points="328,122.8584,332,132.8584,336,122.8584,332,126.8584" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="336" y="84.7432">main thread starts</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="336" y="98.5791">with calling</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="98" x="336" y="112.0552">omc.cpp:main()</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="332" x2="332" y1="167.9521" y2="191.8193"/><polygon fill="#A80036" points="328,181.8193,332,191.8193,336,181.8193,332,185.8193" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="113" x2="113" y1="312.0615" y2="1304.6182"/><polygon fill="#A80036" points="109,1294.6182,113,1304.6182,117,1294.6182,113,1298.6182" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="117" y="806.3242">main thread continues</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="113" x2="113" y1="1369.8994" y2="2394.0557"/><polygon fill="#A80036" points="109,2384.0557,113,2394.0557,117,2384.0557,113,2388.0557" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="332" x2="332" y1="272.1943" y2="306.0615"/><polygon fill="#A80036" points="328,296.0615,332,306.0615,336,296.0615,332,300.0615" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="332" x2="332" y1="2400.0557" y2="2420.0557"/><polygon fill="#A80036" points="328,2410.0557,332,2420.0557,336,2410.0557,332,2414.0557" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="332" x2="332" y1="2485.3369" y2="2505.3369"/><polygon fill="#A80036" points="328,2495.3369,332,2505.3369,336,2495.3369,332,2499.3369" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="332" x2="332" y1="2570.6182" y2="2590.6182"/><polygon fill="#A80036" points="328,2580.6182,332,2590.6182,336,2580.6182,332,2584.6182" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1988.75" x2="1988.75" y1="367.1553" y2="387.1553"/><polygon fill="#A80036" points="1984.75,377.1553,1988.75,387.1553,1992.75,377.1553,1988.75,381.1553" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1988.75" x2="1988.75" y1="526.2607" y2="553.2139"/><polygon fill="#A80036" points="1984.75,543.2139,1988.75,553.2139,1992.75,543.2139,1988.75,547.2139" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1988.75" x2="1988.75" y1="466.249" y2="491.167"/><polygon fill="#A80036" points="1984.75,481.167,1988.75,491.167,1992.75,481.167,1988.75,485.167" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2028.75" x2="2086.25" y1="454.249" y2="454.249"/><polygon fill="#A80036" points="2082.25,523.2139,2086.25,533.2139,2090.25,523.2139,2086.25,527.2139" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2086.25" x2="2086.25" y1="454.249" y2="595.2139"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2086.25" x2="1988.75" y1="595.2139" y2="595.2139"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1988.75" x2="1988.75" y1="595.2139" y2="615.2139"/><polygon fill="#A80036" points="1984.75,605.2139,1988.75,615.2139,1992.75,605.2139,1988.75,609.2139" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1988.75" x2="1988.75" y1="422.249" y2="442.249"/><polygon fill="#A80036" points="1984.75,432.249,1988.75,442.249,1992.75,432.249,1988.75,436.249" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1988.75" x2="1988.75" y1="696.2881" y2="738.4248"/><polygon fill="#A80036" points="1984.75,728.4248,1988.75,738.4248,1992.75,728.4248,1988.75,732.4248" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1898.5" x2="1898.5" y1="960.9307" y2="1623.0127"/><polygon fill="#A80036" points="1894.5,1613.0127,1898.5,1623.0127,1902.5,1613.0127,1898.5,1617.0127" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1898.5" x2="1898.5" y1="1658.1064" y2="2326.0557"/><polygon fill="#A80036" points="1894.5,2316.0557,1898.5,2326.0557,1902.5,2316.0557,1898.5,2320.0557" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2451.75" x2="2451.75" y1="934.9307" y2="954.9307"/><polygon fill="#A80036" points="2447.75,944.9307,2451.75,954.9307,2455.75,944.9307,2451.75,948.9307" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2710.75" x2="2710.75" y1="1599.4756" y2="1634.4756"/><polygon fill="#A80036" points="2706.75,1624.4756,2710.75,1634.4756,2714.75,1624.4756,2710.75,1628.4756" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="960.5" x2="960.5" y1="851.8242" y2="884.7432"/><polygon fill="#A80036" points="956.5,874.7432,960.5,884.7432,964.5,874.7432,960.5,878.7432" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="960.5" x2="960.5" y1="919.8369" y2="2352.0557"/><polygon fill="#A80036" points="956.5,2342.0557,960.5,2352.0557,964.5,2342.0557,960.5,2346.0557" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1507" x2="1507" y1="851.8242" y2="884.7432"/><polygon fill="#A80036" points="1503,874.7432,1507,884.7432,1511,874.7432,1507,878.7432" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1507" x2="1507" y1="919.8369" y2="2352.0557"/><polygon fill="#A80036" points="1503,2342.0557,1507,2352.0557,1511,2342.0557,1507,2346.0557" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2451.75" x2="2451.75" y1="851.8242" y2="884.7432"/><polygon fill="#A80036" points="2447.75,874.7432,2451.75,884.7432,2455.75,874.7432,2451.75,878.7432" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2451.75" x2="2451.75" y1="2332.0557" y2="2352.0557"/><polygon fill="#A80036" points="2447.75,2342.0557,2451.75,2352.0557,2455.75,2342.0557,2451.75,2346.0557" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1097.5" x2="1409.5" y1="839.8242" y2="839.8242"/><polygon fill="#A80036" points="1399.5,835.8242,1409.5,839.8242,1399.5,843.8242,1403.5,839.8242" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1604.5" x2="2352.25" y1="839.8242" y2="839.8242"/><polygon fill="#A80036" points="2342.25,835.8242,2352.25,839.8242,2342.25,843.8242,2346.25,839.8242" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1988.75" x2="1988.75" y1="773.5186" y2="812.8242"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1988.75" x2="960.5" y1="812.8242" y2="812.8242"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="960.5" x2="960.5" y1="812.8242" y2="827.8242"/><polygon fill="#A80036" points="956.5,817.8242,960.5,827.8242,964.5,817.8242,960.5,821.8242" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2551.25" x2="2710.75" y1="839.8242" y2="839.8242"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2710.75" x2="2710.75" y1="839.8242" y2="1533.6201"/><polygon fill="#A80036" points="2706.75,1523.6201,2710.75,1533.6201,2714.75,1523.6201,2710.75,1527.6201" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="960.5" x2="2451.75" y1="2352.0557" y2="2352.0557"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1988.75" x2="1988.75" y1="639.2139" y2="661.1943"/><polygon fill="#A80036" points="1984.75,651.1943,1988.75,661.1943,1992.75,651.1943,1988.75,655.1943" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1988.75" x2="1988.75" y1="2352.0557" y2="2362.0557"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1988.75" x2="2801.75" y1="2362.0557" y2="2362.0557"/><polygon fill="#A80036" points="2797.75,1489.8174,2801.75,1479.8174,2805.75,1489.8174,2801.75,1485.8174" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2801.75" x2="2801.75" y1="627.2139" y2="2362.0557"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2801.75" x2="2061.25" y1="627.2139" y2="627.2139"/><polygon fill="#A80036" points="2071.25,623.2139,2061.25,627.2139,2071.25,631.2139,2067.25,627.2139" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1916.25" x2="757" y1="627.2139" y2="627.2139"/><polygon fill="#A80036" points="753,1478.8174,757,1488.8174,761,1478.8174,757,1482.8174" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="757" x2="757" y1="627.2139" y2="2380.0557"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="757" x2="445" y1="2380.0557" y2="2380.0557"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="445" x2="445" y1="2380.0557" y2="2394.0557"/><polygon fill="#A80036" points="441,2384.0557,445,2394.0557,449,2384.0557,445,2388.0557" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3007.25" x2="3007.25" y1="1031.1182" y2="1051.1182"/><polygon fill="#A80036" points="3003.25,1041.1182,3007.25,1051.1182,3011.25,1041.1182,3007.25,1045.1182" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3007.25" x2="3007.25" y1="1101.3057" y2="1121.3057"/><polygon fill="#A80036" points="3003.25,1111.3057,3007.25,1121.3057,3011.25,1111.3057,3007.25,1115.3057" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3007.25" x2="3007.25" y1="1156.3994" y2="1176.3994"/><polygon fill="#A80036" points="3003.25,1166.3994,3007.25,1176.3994,3011.25,1166.3994,3007.25,1170.3994" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3007.25" x2="3007.25" y1="1226.5869" y2="1246.5869"/><polygon fill="#A80036" points="3003.25,1236.5869,3007.25,1246.5869,3011.25,1236.5869,3007.25,1240.5869" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3007.25" x2="3007.25" y1="1296.7744" y2="1351.9307"/><polygon fill="#A80036" points="3003.25,1341.9307,3007.25,1351.9307,3011.25,1341.9307,3007.25,1345.9307" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3007.25" x2="3007.25" y1="1387.0244" y2="1427.1807"/><polygon fill="#A80036" points="3003.25,1417.1807,3007.25,1427.1807,3011.25,1417.1807,3007.25,1421.1807" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3007.25" x2="3007.25" y1="1462.2744" y2="1482.2744"/><polygon fill="#A80036" points="3003.25,1472.2744,3007.25,1482.2744,3011.25,1472.2744,3007.25,1476.2744" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3007.25" x2="3007.25" y1="1517.3682" y2="1552.3682"/><polygon fill="#A80036" points="3003.25,1542.3682,3007.25,1552.3682,3011.25,1542.3682,3007.25,1546.3682" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3007.25" x2="3007.25" y1="2165.6807" y2="2185.6807"/><polygon fill="#A80036" points="3003.25,2175.6807,3007.25,2185.6807,3011.25,2175.6807,3007.25,2179.6807" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3007.25" x2="3007.25" y1="2266.0557" y2="2286.0557"/><polygon fill="#A80036" points="3003.25,2276.0557,3007.25,2286.0557,3011.25,2276.0557,3007.25,2280.0557" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3545.25" x2="3545.25" y1="1631.3975" y2="1690.0713"/><polygon fill="#A80036" points="3541.25,1680.0713,3545.25,1690.0713,3549.25,1680.0713,3545.25,1684.0713" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3545.25" x2="3545.25" y1="1725.165" y2="1759.165"/><polygon fill="#A80036" points="3541.25,1749.165,3545.25,1759.165,3549.25,1749.165,3545.25,1753.165" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3545.25" x2="3545.25" y1="1794.833" y2="1820.3701"/><polygon fill="#A80036" points="3541.25,1810.3701,3545.25,1820.3701,3549.25,1810.3701,3545.25,1814.3701" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3545.25" x2="3545.25" y1="1855.4639" y2="1894.2686"/><polygon fill="#A80036" points="3541.25,1884.2686,3545.25,1894.2686,3549.25,1884.2686,3545.25,1888.2686" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3545.25" x2="3545.25" y1="1929.3623" y2="1960.3623"/><polygon fill="#A80036" points="3541.25,1950.3623,3545.25,1960.3623,3549.25,1950.3623,3545.25,1954.3623" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3545.25" x2="3545.25" y1="1995.4561" y2="2030.2607"/><polygon fill="#A80036" points="3541.25,2020.2607,3545.25,2030.2607,3549.25,2020.2607,3545.25,2024.2607" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3545.25" x2="3545.25" y1="2065.3545" y2="2094.8271"/><polygon fill="#A80036" points="3541.25,2084.8271,3545.25,2094.8271,3549.25,2084.8271,3545.25,2088.8271" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="4089.25" y1="1739.165" y2="1761.4717"/><polygon fill="#A80036" points="4085.25,1751.4717,4089.25,1761.4717,4093.25,1751.4717,4089.25,1755.4717" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="4089.25" y1="1796.5654" y2="1830.5654"/><polygon fill="#A80036" points="4085.25,1820.5654,4089.25,1830.5654,4093.25,1820.5654,4089.25,1824.5654" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="4089.25" y1="1936.6396" y2="1956.6396"/><polygon fill="#A80036" points="4085.25,1946.6396,4089.25,1956.6396,4093.25,1946.6396,4089.25,1950.6396" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4154.25" x2="4179.25" y1="1924.6396" y2="1924.6396"/><polygon fill="#A80036" points="4175.25,1971.7334,4179.25,1981.7334,4183.25,1971.7334,4179.25,1975.7334" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4179.25" x2="4179.25" y1="1924.6396" y2="2038.8271"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4179.25" x2="4101.25" y1="2038.8271" y2="2038.8271"/><polygon fill="#A80036" points="4111.25,2034.8271,4101.25,2038.8271,4111.25,2042.8271,4107.25,2038.8271" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="4089.25" y1="2006.8271" y2="2026.8271"/><polygon fill="#A80036" points="4085.25,2016.8271,4089.25,2026.8271,4093.25,2016.8271,4089.25,2020.8271" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="4089.25" y1="1865.6592" y2="1912.6396"/><polygon fill="#A80036" points="4085.25,1902.6396,4089.25,1912.6396,4093.25,1902.6396,4089.25,1906.6396" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="4089.25" y1="1680.0713" y2="1704.0713"/><polygon fill="#A80036" points="4085.25,1694.0713,4089.25,1704.0713,4093.25,1694.0713,4089.25,1698.0713" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="4089.25" y1="2050.8271" y2="2062.8271"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="4456.75" y1="2062.8271" y2="2062.8271"/><polygon fill="#A80036" points="4452.75,1862.8076,4456.75,1852.8076,4460.75,1862.8076,4456.75,1858.8076" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4456.75" x2="4456.75" y1="1668.0713" y2="2062.8271"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4456.75" x2="4154.75" y1="1668.0713" y2="1668.0713"/><polygon fill="#A80036" points="4164.75,1664.0713,4154.75,1668.0713,4164.75,1672.0713,4160.75,1668.0713" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4023.75" x2="3937.75" y1="1668.0713" y2="1668.0713"/><polygon fill="#A80036" points="3933.75,1848.8076,3937.75,1858.8076,3941.75,1848.8076,3937.75,1852.8076" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3937.75" x2="3937.75" y1="1668.0713" y2="2074.8271"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3937.75" x2="4089.25" y1="2074.8271" y2="2074.8271"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="4089.25" y1="2074.8271" y2="2100.4951"/><polygon fill="#A80036" points="4085.25,2090.4951,4089.25,2100.4951,4093.25,2090.4951,4089.25,2094.4951" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="4089.25" y1="1617.5537" y2="1656.0713"/><polygon fill="#A80036" points="4085.25,1646.0713,4089.25,1656.0713,4093.25,1646.0713,4089.25,1650.0713" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2833.75" x2="2833.75" y1="1558.3682" y2="1562.3682"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2833.75" x2="3545.25" y1="1562.3682" y2="1562.3682"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3545.25" x2="3545.25" y1="1562.3682" y2="1595.7295"/><polygon fill="#A80036" points="3541.25,1585.7295,3545.25,1595.7295,3549.25,1585.7295,3545.25,1589.7295" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3165" x2="3165" y1="1558.3682" y2="1562.3682"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3165" x2="4089.25" y1="1562.3682" y2="1562.3682"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="4089.25" y1="1562.3682" y2="1581.8857"/><polygon fill="#A80036" points="4085.25,1571.8857,4089.25,1581.8857,4093.25,1571.8857,4089.25,1575.8857" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3545.25" x2="3545.25" y1="2130.4951" y2="2145.6807"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3545.25" x2="2833.75" y1="2145.6807" y2="2145.6807"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2833.75" x2="2833.75" y1="2145.6807" y2="2159.6807"/><polygon fill="#A80036" points="2829.75,2149.6807,2833.75,2159.6807,2837.75,2149.6807,2833.75,2153.6807" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="4089.25" y1="2136.1631" y2="2145.6807"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="4089.25" x2="3165" y1="2145.6807" y2="2145.6807"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3165" x2="3165" y1="2145.6807" y2="2159.6807"/><polygon fill="#A80036" points="3161,2149.6807,3165,2159.6807,3169,2149.6807,3165,2153.6807" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2499.25" x2="2499.25" y1="960.9307" y2="964.9307"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2499.25" x2="3007.25" y1="964.9307" y2="964.9307"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3007.25" x2="3007.25" y1="964.9307" y2="980.9307"/><polygon fill="#A80036" points="3003.25,970.9307,3007.25,980.9307,3011.25,970.9307,3007.25,974.9307" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="445" x2="445" y1="312.0615" y2="316.0615"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="445" x2="1988.75" y1="316.0615" y2="316.0615"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1988.75" x2="1988.75" y1="316.0615" y2="332.0615"/><polygon fill="#A80036" points="1984.75,322.0615,1988.75,332.0615,1992.75,322.0615,1988.75,326.0615" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="107" x="290" y="33.4521">omc-zeroMQ.</text><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="66" x="397" y="32.002">main()</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="124" x="1610.375" y="33.4521">zeroMQ thread:</text><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="209" x="1739.375" y="32.002">omcZeromqTask.run()</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="182" x="2844.5" y="33.4521">omc translation thread:</text><text fill="#000000" font-family="monospace" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="352" x="3031.5" y="32.002">omcZeromqTask::startSimulation()</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="136" x="3595" y="32.5908">simulation thread</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="126" x="4134.25" y="32.5908">progress thread</text><!--MD5=[93ea57caa2b5821f75a57308488a42c2]
@startuml
|#Cornsilk|omc-zeroMQ.""main()""|
start
-> main thread starts
with calling
""omc.cpp:main()"";
:read program arguments;

:instantiate omc and 
 initialize omc with 
 zeroMQ configuration parameter
 via omc C-API function;
note right
  *which ports should be used
  *id's for client and simulation
  *OpenModelica compiler installation path
  *working directory
  *C++ compiler
  *print debug information
end note
 
 '_______________________________________________________________
 'here starts zeroMQ thread and main thread
 '_______________________________________________________________
 
 fork
'_______________________________________________________________
 'main thread
'_______________________________________________________________
 -> main thread continues;
   :Waiting for thread zeroMQ 
   until application 
   is terminated;
 
  fork again
'_______________________________________________________________
'zeroMQ thread
'_______________________________________________________________
  
|#CornflowerBlue|zeroMQ thread: ""omcZeromqTask.run()""| 
:setup zeroMQ connection;
:load Modelica standard library;
if (not loaded?)  then (yes)
  #pink:forward error to main thread ;
  end
  endif

'partition "process user input commands" {
  while (omc-zeroMQ not closed?)
  :wait for  user command  <
  note right
  via zeroMQ 
  command send from
  client application or simulation threads
  end note
  :read json user command information;
  note right
  *simulation ID
  *command type (StartSimulation,StopSimulation,SimulationThreadWatingForID)
  *command argumentes
  *command ID (jobID)
end note
'_______________________________________________________________
'process user command
'_______________________________________________________________
 

'________________
' case 1


if (command type == **SimulationThreadWatingForID**) then (yes)
  : send command id (jobID)  and **StartSimulationThread** command >
  note right
  via zeroMQ to simulation thread
 end note

'case 1 end
'________________



'________________ 
'case 2
elseif (command type == **StopSimulation**) then (yes)
  : send **StopSimulationThread** command >
  note right
  via zeroMQ to progress thread
  end note

'case 2 end
'________________


'________________ 
'case 3

 elseif (command type ==  **StartSimulation**) then (yes)
 :set command id (jobID) in omc instance
  via omc C-API function;
  fork
  :continue;
  fork again

'_______________________________________________________________
'StartSimulation  thread
'_______________________________________________________________

|#CadetBlue|omc translation thread: ""omcZeromqTask::startSimulation()""|
  : read command arguments for Modelica file paths 
  of  needed Modelica files;
  : load all Modelica files with omc C-API function
  **LoadFile**;
  : read command arguments for Modelica model parameter;
  :set all Modelica parameter with with omc C-API function
  **SendCommand**;
  :set the working directory with omc C-API function
  **SetWorkingDirectory**;
  : read command arguments for simulation parameter; 
note right
  *simulation stop time
  *number of intervalls
  *tolerance
  *solver name
end note
'partition "start simulation with omc C-API function **SendCommand**" {
    :translate Modelica code to simulation executable;
    :SimController.Start();
    note right
  executes simulation with simulation arguments
  end note
    fork
    |#LightSlateGrey|simulation thread|
      :send ""SimulationThreadWatingForID""  >
  note right
  via zeroMQ 
  command to omcZeromqTask
  to receive command id (jobID)
  end note
     :wait for command id (jobID)  <
  note right
  via zeroMQ 
  command id is send by omcZeromqTask 
 
  end note
   : ""setSimStarted()""; 
  note right
  informs controller of simulation
  and progress threads
  end note

    : send **SimulationStarted** command >
  note right
  via zeroMQ to client application 
  with used command id (jobID) 
  end note
      :initialize simulation;
      :run simulation;
      : send **SimulationStopped** command >
  note right
  via zeroMQ to client application 
  with used command id (jobID) 
  end note
   : ""setSimStopped()""; 
  note right
  informs controller of simulation
  and progress threads
  end note

'_______________________________________________________________
'StartSimulation  thread
'_______________________________________________________________
 
 
 fork again
 
 
'_______________________________________________________________
'Progress  thread
'_______________________________________________________________
    |#DarkSlateGrey|progress thread|
    : ""setGuiStarted()""; 
  note right
  informs controller of simulation
  and progress threads
  end note
    while (not simulation stoped?)
      : get latest integrator step time;
      : send **SimulationProgressChanged** command >
  note right
  via zeroMQ client application
  with used command id (jobID) 
  end note
   :ask for simulation stop <
  note right
  via zeroMQ 
  command send from
  client application
  end note
  if (simulation is stopped?) then
  :inform thread controller to 
  stop threads;
  endif
  endwhile
    : ""setGuiStopped()""; 
  note right
  informs controller of simulation
  and progress threads
  end note
 |#CadetBlue|omc translation thread: ""omcZeromqTask::startSimulation()""|
    end fork
'_______________________________________________________________
'Progress  thread end
'_______________________________________________________________
'}
 :Check if exceptions
   have occurred in 
   simulation thread and forward 
   it to omcZeromqTask.run();
end
'if (not simulated?)  then (yes)
'  #pink:forward error to main thread ;
'endif

|#CornflowerBlue|zeroMQ thread: ""omcZeromqTask.run()""| 
endfork


'________________ 
'case 3 end
else
:forward exception 
**commandNotSupported** 
to omc-zeroMQ.""main()"";
end
endif


endwhile




|#Cornsilk|omc-zeroMQ.""main()""|
  end fork


'_______________________________________________________________
' All threads stopped, main thread ends
'_______________________________________________________________ 
  :Check if exceptions
   have occurred in 
   simulation threads;
   :Printing errors 
   that have occurred 
   in output;
stop






@enduml

@startuml
|#Cornsilk|omc-zeroMQ.""main()""|
start
-> main thread starts
with calling
""omc.cpp:main()"";
:read program arguments;

:instantiate omc and 
 initialize omc with 
 zeroMQ configuration parameter
 via omc C-API function;
note right
  *which ports should be used
  *id's for client and simulation
  *OpenModelica compiler installation path
  *working directory
  *C++ compiler
  *print debug information
end note
 
 
 fork
 -> main thread continues;
   :Waiting for thread zeroMQ 
   until application 
   is terminated;
 
  fork again
  
|#CornflowerBlue|zeroMQ thread: ""omcZeromqTask.run()""| 
:setup zeroMQ connection;
:load Modelica standard library;
if (not loaded?)  then (yes)
  #pink:forward error to main thread ;
  end
  endif

  while (omc-zeroMQ not closed?)
  :wait for  user command  <
  note right
  via zeroMQ 
  command send from
  client application or simulation threads
  end note
  :read json user command information;
  note right
  *simulation ID
  *command type (StartSimulation,StopSimulation,SimulationThreadWatingForID)
  *command argumentes
  *command ID (jobID)
end note
 



if (command type == **SimulationThreadWatingForID**) then (yes)
  : send command id (jobID)  and **StartSimulationThread** command >
  note right
  via zeroMQ to simulation thread
 end note




elseif (command type == **StopSimulation**) then (yes)
  : send **StopSimulationThread** command >
  note right
  via zeroMQ to progress thread
  end note




 elseif (command type ==  **StartSimulation**) then (yes)
 :set command id (jobID) in omc instance
  via omc C-API function;
  fork
  :continue;
  fork again


|#CadetBlue|omc translation thread: ""omcZeromqTask::startSimulation()""|
  : read command arguments for Modelica file paths 
  of  needed Modelica files;
  : load all Modelica files with omc C-API function
  **LoadFile**;
  : read command arguments for Modelica model parameter;
  :set all Modelica parameter with with omc C-API function
  **SendCommand**;
  :set the working directory with omc C-API function
  **SetWorkingDirectory**;
  : read command arguments for simulation parameter; 
note right
  *simulation stop time
  *number of intervalls
  *tolerance
  *solver name
end note
    :translate Modelica code to simulation executable;
    :SimController.Start();
    note right
  executes simulation with simulation arguments
  end note
    fork
    |#LightSlateGrey|simulation thread|
      :send ""SimulationThreadWatingForID""  >
  note right
  via zeroMQ 
  command to omcZeromqTask
  to receive command id (jobID)
  end note
     :wait for command id (jobID)  <
  note right
  via zeroMQ 
  command id is send by omcZeromqTask 
 
  end note
   : ""setSimStarted()""; 
  note right
  informs controller of simulation
  and progress threads
  end note

    : send **SimulationStarted** command >
  note right
  via zeroMQ to client application 
  with used command id (jobID) 
  end note
      :initialize simulation;
      :run simulation;
      : send **SimulationStopped** command >
  note right
  via zeroMQ to client application 
  with used command id (jobID) 
  end note
   : ""setSimStopped()""; 
  note right
  informs controller of simulation
  and progress threads
  end note

 
 
 fork again
 
 
    |#DarkSlateGrey|progress thread|
    : ""setGuiStarted()""; 
  note right
  informs controller of simulation
  and progress threads
  end note
    while (not simulation stoped?)
      : get latest integrator step time;
      : send **SimulationProgressChanged** command >
  note right
  via zeroMQ client application
  with used command id (jobID) 
  end note
   :ask for simulation stop <
  note right
  via zeroMQ 
  command send from
  client application
  end note
  if (simulation is stopped?) then
  :inform thread controller to 
  stop threads;
  endif
  endwhile
    : ""setGuiStopped()""; 
  note right
  informs controller of simulation
  and progress threads
  end note
 |#CadetBlue|omc translation thread: ""omcZeromqTask::startSimulation()""|
    end fork
 :Check if exceptions
   have occurred in 
   simulation thread and forward 
   it to omcZeromqTask.run();
end

|#CornflowerBlue|zeroMQ thread: ""omcZeromqTask.run()""| 
endfork


else
:forward exception 
**commandNotSupported** 
to omc-zeroMQ.""main()"";
end
endif


endwhile




|#Cornsilk|omc-zeroMQ.""main()""|
  end fork


  :Check if exceptions
   have occurred in 
   simulation threads;
   :Printing errors 
   that have occurred 
   in output;
stop






@enduml

PlantUML version 1.2020.18(Wed Sep 30 21:40:44 CEST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>